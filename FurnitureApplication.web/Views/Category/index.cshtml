@model List<FurnitureApplication.Entities.Category>
@{
    ViewBag.Title = "index";
}


<div id="main">
    <div class="main-holder">
        <div class="container" style="margin-top: 130px; margin-bottom: 30px;">
            <div class="heading-area">
                <h2>Category List</h2>
            </div>
            <hr />
            <table id="categoryContent" class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Description</th>
                        <th scope="col">Is Featured</th>
                        <th scope="col">Image</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var category in Model)
                    {
                        <tr>
                            <th>@category.Name</th>
                            <td>@category.Description</td>
                            @*<td>@category.isFeatured</td>*@
                            <td><div class="table-img"><img src="@category" /></div></td>
                            <td>
                                <button class="btn btn-primary editBtn" data-id="@category.ID">Edit</button>
                                <button class="btn btn-primary deleteBtn" data-id="@category.ID">Delete</button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    $(".editBtn").click(function () {
        $.ajax({
            url: "/Category/Edit",
            data: {
                ID: $(this).attr("data-id")
            }
        })
            .done(function (response) {
                $("#categoryContent").html(response);
            })
            .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                alert("Fail")
            });
    });


    $(".deleteBtn").click(function () {
        var confirmDelete = confirm("Are tou sure you want to delete this product?");

        if (confirmDelete) {
            $.ajax({
                type: "POST",
                url: "/Category/Delete",
                data: {
                    ID: $(this).attr("data-id")
                }
            })
                .done(function (response) {
                    $("#categoryContent").html(response);
                })
                .fail(function (XMLHttpRequest, textStatus, errorThrown) {
                    alert("Fail")
                });
        }
    });
</script>
